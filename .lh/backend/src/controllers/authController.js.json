{
    "sourceFile": "backend/src/controllers/authController.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 8,
            "patches": [
                {
                    "date": 1765259144505,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1765259508600,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -46,7 +46,7 @@\n       token,\r\n     });\r\n   } catch (error) {\r\n     console.error(\"Register error: \", error);\r\n-    register.status(500).json({ message: \"server error\" });\r\n+    res.status(500).json({ message: \"server error\" });\r\n   }\r\n };\r\n"
                },
                {
                    "date": 1765259527536,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -23,9 +23,9 @@\n     const exist = await pool.query(\"SELECT id FROM users WHERE email = $1\", [\r\n       email,\r\n     ]);\r\n \r\n-    if (existing.rows.length > 0) {\r\n+    if (exist.rows.length > 0) {\r\n       return res.status(400).json({ message: \"Email already registered\" });\r\n     }\r\n \r\n     const hashedPassword = await bcrypt.hash(password, 10);\r\n"
                },
                {
                    "date": 1765259597557,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,50 @@\n+import bcrypt from \"bcrypt\";\r\n+import jwt from \"jsonwebtoken\";\r\n+import pool from \"../models/db.js\";\r\n+\r\n+////// To generate Token\r\n+const generateToken = (user) => {\r\n+  return jwt.sign({ id: user.id, email: user.email }, process.env.JWT_SECRET);\r\n+};\r\n+\r\n+////////  To Register\r\n+\r\n+export const register = async (req, res) => {\r\n+  try {\r\n+    const { username, email, password } = req.body;\r\n+\r\n+    if (!username || !email || !password) {\r\n+      return res.status(400).json({ message: \"All feilds are required....\" });\r\n+    }\r\n+\r\n+    // now to check if the email esists or not\r\n+    const exist = await pool.query(\"SELECT id FROM users WHERE email = $1\", [\r\n+      email,\r\n+    ]);\r\n+\r\n+    if (exist.rows.length > 0) {\r\n+      return res.status(400).json({ message: \"Email already registered\" });\r\n+    }\r\n+\r\n+    const hashedPassword = await bcrypt.hash(password, 10);\r\n+\r\n+    const result = await pool.query(\r\n+      `INSERT INTO users (username, email, password)\r\n+        VALUES ($1, $2, $3)\r\n+        RETURNING id, username, email, created_at`,\r\n+      [username, email, hashedPassword]\r\n+    );\r\n+\r\n+    const user = result.rows[0];\r\n+    const token = generateToken(user);\r\n+\r\n+    res.status(201).json({\r\n+      message: \"Registration Successful\",\r\n+      user,\r\n+      token,\r\n+    });\r\n+  } catch (error) {\r\n+    console.error(\"Register error: \", error);\r\n+    res.status(500).json({ message: \"server error\" });\r\n+  }\r\n+};\r\n"
                },
                {
                    "date": 1765260014248,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,50 @@\n+import bcrypt from \"bcrypt\";\r\n+import jwt from \"jsonwebtoken\";\r\n+import pool from \"../models/db.js\";\r\n+\r\n+////// To generate Token\r\n+const generateToken = (user) => {\r\n+  return jwt.sign({ id: user.id, email: user.email }, process.env.JWT_SECRET);\r\n+};\r\n+\r\n+////////  To Register\r\n+\r\n+export const register = async (req, res) => {\r\n+  try {\r\n+    const { username, email, password, confirmPassword, mobile } = req.body;\r\n+\r\n+    if (!username || !email || !password) {\r\n+      return res.status(400).json({ message: \"All feilds are required....\" });\r\n+    }\r\n+\r\n+    // now to check if the email esists or not\r\n+    const exist = await pool.query(\"SELECT id FROM users WHERE email = $1\", [\r\n+      email,\r\n+    ]);\r\n+\r\n+    if (exist.rows.length > 0) {\r\n+      return res.status(400).json({ message: \"Email already registered\" });\r\n+    }\r\n+\r\n+    const hashedPassword = await bcrypt.hash(password, 10);\r\n+\r\n+    const result = await pool.query(\r\n+      `INSERT INTO users (username, email, password)\r\n+        VALUES ($1, $2, $3)\r\n+        RETURNING id, username, email, created_at`,\r\n+      [username, email, hashedPassword]\r\n+    );\r\n+\r\n+    const user = result.rows[0];\r\n+    const token = generateToken(user);\r\n+\r\n+    res.status(201).json({\r\n+      message: \"Registration Successful\",\r\n+      user,\r\n+      token,\r\n+    });\r\n+  } catch (error) {\r\n+    console.error(\"Register error: \", error);\r\n+    res.status(500).json({ message: \"server error\" });\r\n+  }\r\n+};\r\n"
                },
                {
                    "date": 1765260025641,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,50 @@\n+import bcrypt from \"bcrypt\";\r\n+import jwt from \"jsonwebtoken\";\r\n+import pool from \"../models/db.js\";\r\n+\r\n+////// To generate Token\r\n+const generateToken = (user) => {\r\n+  return jwt.sign({ id: user.id, email: user.email }, process.env.JWT_SECRET);\r\n+};\r\n+\r\n+////////  To Register\r\n+\r\n+export const register = async (req, res) => {\r\n+  try {\r\n+    const { username, email, password, confirmPassword, mobile_no, gender } = req.body;\r\n+\r\n+    if (!username || !email || !password) {\r\n+      return res.status(400).json({ message: \"All feilds are required....\" });\r\n+    }\r\n+\r\n+    // now to check if the email esists or not\r\n+    const exist = await pool.query(\"SELECT id FROM users WHERE email = $1\", [\r\n+      email,\r\n+    ]);\r\n+\r\n+    if (exist.rows.length > 0) {\r\n+      return res.status(400).json({ message: \"Email already registered\" });\r\n+    }\r\n+\r\n+    const hashedPassword = await bcrypt.hash(password, 10);\r\n+\r\n+    const result = await pool.query(\r\n+      `INSERT INTO users (username, email, password)\r\n+        VALUES ($1, $2, $3)\r\n+        RETURNING id, username, email, created_at`,\r\n+      [username, email, hashedPassword]\r\n+    );\r\n+\r\n+    const user = result.rows[0];\r\n+    const token = generateToken(user);\r\n+\r\n+    res.status(201).json({\r\n+      message: \"Registration Successful\",\r\n+      user,\r\n+      token,\r\n+    });\r\n+  } catch (error) {\r\n+    console.error(\"Register error: \", error);\r\n+    res.status(500).json({ message: \"server error\" });\r\n+  }\r\n+};\r\n"
                },
                {
                    "date": 1765260036338,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,50 @@\n+import bcrypt from \"bcrypt\";\r\n+import jwt from \"jsonwebtoken\";\r\n+import pool from \"../models/db.js\";\r\n+\r\n+////// To generate Token\r\n+const generateToken = (user) => {\r\n+  return jwt.sign({ id: user.id, email: user.email }, process.env.JWT_SECRET);\r\n+};\r\n+\r\n+////////  To Register\r\n+\r\n+export const register = async (req, res) => {\r\n+  try {\r\n+    const { username, email, password, confirmPassword, mobile_no, gender } = req.body;\r\n+\r\n+    if (!username || !email || !password || !confirm ) {\r\n+      return res.status(400).json({ message: \"All feilds are required....\" });\r\n+    }\r\n+\r\n+    // now to check if the email esists or not\r\n+    const exist = await pool.query(\"SELECT id FROM users WHERE email = $1\", [\r\n+      email,\r\n+    ]);\r\n+\r\n+    if (exist.rows.length > 0) {\r\n+      return res.status(400).json({ message: \"Email already registered\" });\r\n+    }\r\n+\r\n+    const hashedPassword = await bcrypt.hash(password, 10);\r\n+\r\n+    const result = await pool.query(\r\n+      `INSERT INTO users (username, email, password)\r\n+        VALUES ($1, $2, $3)\r\n+        RETURNING id, username, email, created_at`,\r\n+      [username, email, hashedPassword]\r\n+    );\r\n+\r\n+    const user = result.rows[0];\r\n+    const token = generateToken(user);\r\n+\r\n+    res.status(201).json({\r\n+      message: \"Registration Successful\",\r\n+      user,\r\n+      token,\r\n+    });\r\n+  } catch (error) {\r\n+    console.error(\"Register error: \", error);\r\n+    res.status(500).json({ message: \"server error\" });\r\n+  }\r\n+};\r\n"
                },
                {
                    "date": 1765260063541,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,8 +15,9 @@\n \r\n     if (!username || !email || !password || !confirmPassword) {\r\n       return res.status(400).json({ message: \"All feilds are required....\" });\r\n     }\r\n+    \r\n \r\n     // now to check if the email esists or not\r\n     const exist = await pool.query(\"SELECT id FROM users WHERE email = $1\", [\r\n       email,\r\n"
                },
                {
                    "date": 1765260075037,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,52 @@\n+import bcrypt from \"bcrypt\";\r\n+import jwt from \"jsonwebtoken\";\r\n+import pool from \"../models/db.js\";\r\n+\r\n+////// To generate Token\r\n+const generateToken = (user) => {\r\n+  return jwt.sign({ id: user.id, email: user.email }, process.env.JWT_SECRET);\r\n+};\r\n+\r\n+////////  To Register\r\n+\r\n+export const register = async (req, res) => {\r\n+  try {\r\n+    const { username, email, password, confirmPassword, mobile_no, gender } = req.body;\r\n+\r\n+    if (!username || !email || !password || !confirmPassword) {\r\n+      return res.status(400).json({ message: \"All feilds are required....\" });\r\n+    }\r\n+\r\n+    if(password !== )\r\n+\r\n+    // now to check if the email esists or not\r\n+    const exist = await pool.query(\"SELECT id FROM users WHERE email = $1\", [\r\n+      email,\r\n+    ]);\r\n+\r\n+    if (exist.rows.length > 0) {\r\n+      return res.status(400).json({ message: \"Email already registered\" });\r\n+    }\r\n+\r\n+    const hashedPassword = await bcrypt.hash(password, 10);\r\n+\r\n+    const result = await pool.query(\r\n+      `INSERT INTO users (username, email, password)\r\n+        VALUES ($1, $2, $3)\r\n+        RETURNING id, username, email, created_at`,\r\n+      [username, email, hashedPassword]\r\n+    );\r\n+\r\n+    const user = result.rows[0];\r\n+    const token = generateToken(user);\r\n+\r\n+    res.status(201).json({\r\n+      message: \"Registration Successful\",\r\n+      user,\r\n+      token,\r\n+    });\r\n+  } catch (error) {\r\n+    console.error(\"Register error: \", error);\r\n+    res.status(500).json({ message: \"server error\" });\r\n+  }\r\n+};\r\n"
                }
            ],
            "date": 1765259144505,
            "name": "Commit-0",
            "content": "import bcrypt from \"bcrypt\";\r\nimport jwt from \"jsonwebtoken\";\r\nimport pool from \"../models/db.js\";\r\n\r\n////// To generate Token\r\nconst generateToken = (user) => {\r\n  return jwt.sign({ id: user.id, email: user.email }, process.env.JWT_SECRET, {\r\n    expireIn: process.env.JWT_EXPIRES_IN || \"1h\",\r\n  });\r\n};\r\n\r\n////////  To Register\r\n\r\nexport const register = async (req, res) => {\r\n  try {\r\n    const { username, email, password } = req.body;\r\n\r\n    if (!username || !email || !password) {\r\n      return res.status(400).json({ message: \"All feilds are required....\" });\r\n    }\r\n\r\n    // now to check if the email esists or not\r\n    const exist = await pool.query(\"SELECT id FROM users WHERE email = $1\", [\r\n      email,\r\n    ]);\r\n\r\n    if (existing.rows.length > 0) {\r\n      return res.status(400).json({ message: \"Email already registered\" });\r\n    }\r\n\r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n    const result = await pool.query(\r\n      `INSERT INTO users (username, email, password)\r\n        VALUES ($1, $2, $3)\r\n        RETURNING id, username, email, created_at`,\r\n      [username, email, hashedPassword]\r\n    );\r\n\r\n    const user = result.rows[0];\r\n    const token = generateToken(user);\r\n\r\n    res.status(201).json({\r\n      message: \"Registration Successful\",\r\n      user,\r\n      token,\r\n    });\r\n  } catch (error) {\r\n    console.error(\"Register error: \", error);\r\n    register.status(500).json({ message: \"server error\" });\r\n  }\r\n};\r\n"
        }
    ]
}